{% extends "base.html" %}
{% load static %}
{% block title %}<title>Последние вакансии</title>{% endblock %}
{% block content %}

    <h2>Навыки</h2>

    <form method="get" action="{% url 'skills:skills' %}">
        <label for="year">Выберите год:</label>
        <select name="year" id="year">
            {% for year in unique_years %}
                <option value="{{ year }}" {% if year == selected_year %}selected{% endif %}>{{ year }}</option>
            {% endfor %}
        </select>
        <button type="submit">Применить</button>
    </form>

    <div class="year-block">
        <h3>Динамика навыков по годам (Общая) - {{ selected_year }}</h3>
        <div class="table-graph-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Навык</th>
                        <th>Количество</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in skills_all %}
                        <tr>
                            <td>{{ row.skill_name }}</td>
                            <td>{{ row.count }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <img src="{% static 'skills/img/bar_chart_all_' %}{{ selected_year }}.png" alt="График" width="1000" height="600">
        </div>
    </div>

    <div class="year-block">
        <h3>Динамика навыков по годам ({{ prof }}) - {{ selected_year }}</h3>
        <div class="table-graph-wrapper">
            <table>
                <thead>
                    <tr>
                        <th>Навык</th>
                        <th>Количество</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in skills_prof %}
                        <tr>
                            <td>{{ row.skill_name }}</td>
                            <td>{{ row.count }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            <img src="{% static 'skills/img/bar_chart_prof_' %}{{ selected_year }}.png" alt="График" width="1000" height="600">
        </div>
    </div>
{% endblock %}