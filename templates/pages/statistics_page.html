{% extends 'base.html' %}
{% load static %}

{% block title %}Общая статистика{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-4">Общая статистика</h1>

    <div class="row">
        <div class="col-md-12">
            <h2>Динамика уровня зарплат по годам</h2>
            <img src="{{ salary_by_year_plot }}" alt="Динамика зарплат">
            <div class="trend-table mt-3">{{ salary_by_year_table|safe }}</div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-12">
            <h2>Динамика количества вакансий по годам</h2>
             <img src="{{ vacancies_by_year_plot }}" alt="" class="trend-plot" width="750" height="500">
            <div class="trend-table mt-3">{{ vacancies_by_year_table|safe }}</div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-12">
            <h2>Уровень зарплат по городам</h2>

             <img src="{{ salary_by_city_plot }}" alt="" class="trend-plot" width="750" height="500">
            <div class="trend-table mt-3">{{ salary_by_city_table|safe }}</div>
        </div>
    </div>


    <div class="row mt-5">
        <div class="col-md-12">
            <h2>Доля вакансий по городам</h2>
                <img src="{{ vacancy_share_by_city_plot }}" alt="" class="trend-plot" width="750" height="500">
                <div class="trend-table mt-3">{{ vacancy_share_by_city_table|safe }}</div>
        </div>
    </div>
    <div class="form-container">
        <form method="get" action="{% url 'statistics_page:statistics_page' %}">
            <div class="form-group">
                <label for="year" class="form-label">Выберите год:</label>
                <select name="year" id="year" class="form-select">
                    {% for year in unique_years %}
                        <option value="{{ year }}" {% if year == selected_year %}selected{% endif %}>{{ year }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="form-button">Применить</button>
        </form>
    <div class="row mt-5">
        <div class="col-md-12">
            <h2>Топ навыков</h2>
            <img src="{{ top_skills_chart }}" alt="" class="trend-plot" width="750" height="500">
        <div class="trend-table mt-3">{{ top_skills_table|safe }}</div>
    </div>
</div>
{% endblock %}
